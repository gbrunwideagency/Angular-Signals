import{a as ne}from"./chunk-F3WCJMFH.js";import{Ab as ie,Ca as C,Fb as re,Ha as b,I as J,Ja as W,K as z,La as f,N as G,Na as E,Oa as V,P as K,Pa as o,Qa as r,Ra as M,Sa as D,Ta as F,Ua as u,V as m,X as h,Ya as c,Za as v,_a as x,a as N,b as q,bb as _,ca as k,db as X,ea as S,eb as Y,fa as y,fb as Z,ia as Q,j as L,ka as w,n as P,pb as g,q as U,qb as j,rb as ee,w as A,wa as a,x as B,y as H,zb as te}from"./chunk-EUI5CMWI.js";function $(i,e){!e?.injector&&k($);let l=e?.injector??m(Q),n=new L(1),t=ee(()=>{let s;try{s=i()}catch(d){j(()=>n.error(d));return}j(()=>n.next(s))},{injector:l,manualCleanup:!0});return l.get(w).onDestroy(()=>{t.destroy(),n.complete()}),n.asObservable()}function I(i,e){let l=!e?.manualCleanup;l&&!e?.injector&&k(I);let n=l?e?.injector?.get(w)??m(w):null,t;e?.requireSync?t=C({kind:0}):t=C({kind:1,value:e?.initialValue});let s=i.subscribe({next:d=>t.set({kind:1,value:d}),error:d=>{if(e?.rejectErrors)throw d;t.set({kind:2,error:d})}});return n?.onDestroy(s.unsubscribe.bind(s)),g(()=>{let d=t();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new G(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var T=(()=>{let e=class e{constructor(){this.url="https://swapi.py4e.com/api/vehicles/",this.http=m(ne),this.vehicles$=this.http.get(this.url).pipe(U(n=>n.results.map(t=>q(N({},t),{cost_in_credits:isNaN(Number(t.cost_in_credits))?String(Math.random()*1e5):t.cost_in_credits}))),J(1),H(this.handleError)),this.vehicles=I(this.vehicles$,{initialValue:[]}),this.selectedVehicle=C(void 0),this.vehicleFilms$=$(this.selectedVehicle).pipe(B(Boolean),z(n=>A(n.films.map(t=>this.http.get(t))))),this.vehicleFilms=I(this.vehicleFilms$,{initialValue:[]})}vehicleSelected(n){let t=this.vehicles().find(s=>s.name===n);this.selectedVehicle.set(t)}handleError(n){let t="";return n.error instanceof ErrorEvent?t=`An error occurred: ${n.error.message}`:t=`Server returned code: ${n.status}, error message is: ${n.message}`,console.error(t),P(()=>t)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ce=(i,e)=>e.name,se=i=>({active:i});function ae(i,e){if(i&1){let l=D();o(0,"button",6),F("click",function(){let t=S(l).$implicit,s=u(2);return y(s.onSelected(t.name))}),c(1),r()}if(i&2){let l,n=e.$implicit,t=u(2);W("ngClass",X(2,se,(n==null?null:n.name)===((l=t.selectedVehicle())==null?null:l.name))),a(),x(" ",n.name," ")}}function de(i,e){if(i&1&&(o(0,"div",2)(1,"div",4),E(2,ae,2,4,"button",5,ce),r()()),i&2){let l=u();a(2),V(l.vehicles())}}function me(i,e){if(i&1&&(o(0,"div",3),c(1),r()),i&2){let l=u();a(),x(" ",l.errorMessage," ")}}var oe=(()=>{let e=class e{constructor(){this.pageTitle="Vehicles",this.errorMessage="",this.vehicleService=m(T),this.vehicles=g(()=>{try{return this.vehicleService.vehicles()}catch(n){return this.errorMessage=typeof n=="string"?n:"Error",[]}}),this.selectedVehicle=this.vehicleService.selectedVehicle}onSelected(n){this.vehicleService.vehicleSelected(n)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h({type:e,selectors:[["swv-vehicle-list"]],standalone:!0,features:[_],decls:5,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"alert","alert-danger"],[1,"list-group"],["type","button",1,"list-group-item",3,"ngClass"],["type","button",1,"list-group-item",3,"click","ngClass"]],template:function(t,s){t&1&&(o(0,"div",0)(1,"div",1),c(2),r(),b(3,de,4,0,"div",2)(4,me,2,1,"div",3),r()),t&2&&(a(2),x(" ",s.pageTitle," "),a(),f(s.vehicles().length?3:-1),a(),f(s.errorMessage?4:-1))},dependencies:[te],encapsulation:2});let i=e;return i})();var ue=(i,e)=>e.title;function pe(i,e){if(i&1&&(o(0,"li",8),c(1),r()),i&2){let l=e.$implicit;a(),v(l.title)}}function ve(i,e){if(i&1&&(o(0,"div",3)(1,"div",4),c(2,"Films:"),r(),o(3,"div",5)(4,"ul",7),E(5,pe,2,1,"li",8,ue),r()()()),i&2){let l=u(2);a(5),V(l.vehicleFilms())}}function he(i,e){if(i&1){let l=D();o(0,"div",0)(1,"div",1),c(2),r(),o(3,"div",2)(4,"div",3)(5,"div",4),c(6,"Name:"),r(),o(7,"div",5),c(8),r(),o(9,"div",4)(10,"button",6),F("click",function(){S(l);let t=u();return y(t.addToCart(t.vehicle()))}),c(11,"Add to Cart "),r()()(),o(12,"div",3)(13,"div",4),c(14,"Classification:"),r(),o(15,"div",5),c(16),r()(),o(17,"div",3)(18,"div",4),c(19,"Price (in credits):"),r(),o(20,"div",5),c(21),Y(22,"number"),r()(),o(23,"div",3)(24,"div",4),c(25,"Crew:"),r(),o(26,"div",5),c(27),r()(),o(28,"div",3)(29,"div",4),c(30,"Passengers:"),r(),o(31,"div",5),c(32),r()(),o(33,"div",3)(34,"div",4),c(35,"Cargo Capacity:"),r(),o(36,"div",5),c(37),r()(),b(38,ve,7,0,"div",3),r()()}if(i&2){let l,n,t,s,d,O,p=u();a(2),x(" ",p.pageTitle()," "),a(6),v((l=p.vehicle())==null?null:l.name),a(8),v((n=p.vehicle())==null?null:n.vehicle_class),a(5),v(Z(22,8,(t=p.vehicle())==null?null:t.cost_in_credits,"1.2-2")),a(6),v((s=p.vehicle())==null?null:s.crew),a(5),v((d=p.vehicle())==null?null:d.passengers),a(5),v((O=p.vehicle())==null?null:O.cargo_capacity),a(),f(p.vehicleFilms()?38:-1)}}var le=(()=>{let e=class e{constructor(){this.errorMessage="",this.cartService=m(re),this.vehicleService=m(T),this.vehicle=this.vehicleService.selectedVehicle,this.vehicleFilms=this.vehicleService.vehicleFilms,this.pageTitle=g(()=>this.vehicle()?`Detail for: ${this.vehicle()?.name}`:"")}addToCart(n){n&&this.cartService.addToCart(n)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h({type:e,selectors:[["swv-vehicle-detail"]],standalone:!0,features:[_],decls:1,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[1,"btn","btn-primary",3,"click"],[1,"list-group"],[1,"list-group-item"]],template:function(t,s){t&1&&b(0,he,39,11,"div",0),t&2&&f(s.vehicle()?0:-1)},dependencies:[ie],encapsulation:2});let i=e;return i})();var Ae=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h({type:e,selectors:[["swv-vehicle-shell"]],standalone:!0,features:[_],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-4"],[1,"col-md-8"]],template:function(t,s){t&1&&(o(0,"div",0)(1,"div",1),M(2,"swv-vehicle-list"),r(),o(3,"div",2),M(4,"swv-vehicle-detail"),r()())},dependencies:[oe,le],encapsulation:2});let i=e;return i})();export{Ae as VehicleShellComponent};
