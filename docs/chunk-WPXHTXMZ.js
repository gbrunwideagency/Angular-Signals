import{a as ne}from"./chunk-OKY73NHR.js";import{Ab as te,Bb as ie,Ca as b,Gb as re,Ha as S,I as z,Ja as W,K as G,La as x,N as M,Na as V,Oa as D,P as K,Pa as l,Qa as r,Ra as $,Sa as k,Ta as T,Ua as u,V as m,X as f,Ya as s,Za as v,_a as _,a as N,b as L,ca as j,cb as g,ea as y,eb as X,fa as w,fb as Y,gb as Z,ia as Q,j as P,ja as E,n as U,q as A,qb as C,rb as q,sb as ee,w as B,x as H,xa as a,y as J}from"./chunk-UUY4E6TN.js";function O(t,e){!e?.injector&&j(O);let o=e?.injector??m(Q),n=new P(1),i=ee(()=>{let c;try{c=t()}catch(h){q(()=>n.error(h));return}q(()=>n.next(c))},{injector:o,manualCleanup:!0});return o.get(E).onDestroy(()=>{i.destroy(),n.complete()}),n.asObservable()}function F(t,e){let o=!e?.manualCleanup;o&&!e?.injector&&j(F);let n=o?e?.injector?.get(E)??m(E):null,i=ce(e?.equal),c;e?.requireSync?c=b({kind:0},{equal:i}):c=b({kind:1,value:e?.initialValue},{equal:i});let h=t.subscribe({next:d=>c.set({kind:1,value:d}),error:d=>{if(e?.rejectErrors)throw d;c.set({kind:2,error:d})}});if(e?.requireSync&&c().kind===0)throw new M(601,!1);return n?.onDestroy(h.unsubscribe.bind(h)),C(()=>{let d=c();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new M(601,!1)}},{equal:e?.equal})}function ce(t=Object.is){return(e,o)=>e.kind===1&&o.kind===1&&t(e.value,o.value)}var I=(()=>{let e=class e{constructor(){this.url="https://swapi.py4e.com/api/vehicles/",this.http=m(ne),this.vehicles$=this.http.get(this.url).pipe(A(n=>n.results.map(i=>L(N({},i),{cost_in_credits:isNaN(Number(i.cost_in_credits))?String(Math.random()*1e5):i.cost_in_credits}))),z(1),J(this.handleError)),this.vehicles=F(this.vehicles$,{initialValue:[]}),this.selectedVehicle=b(void 0),this.vehicleFilms$=O(this.selectedVehicle).pipe(H(Boolean),G(n=>B(n.films.map(i=>this.http.get(i))))),this.vehicleFilms=F(this.vehicleFilms$,{initialValue:[]})}vehicleSelected(n){let i=this.vehicles().find(c=>c.name===n);this.selectedVehicle.set(i)}handleError(n){let i="";return n.error instanceof ErrorEvent?i=`An error occurred: ${n.error.message}`:i=`Server returned code: ${n.status}, error message is: ${n.message}`,console.error(i),U(()=>i)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var se=(t,e)=>e.name,ae=t=>({active:t});function de(t,e){if(t&1){let o=k();l(0,"button",6),T("click",function(){let i=y(o).$implicit,c=u(2);return w(c.onSelected(i.name))}),s(1),r()}if(t&2){let o,n=e.$implicit,i=u(2);W("ngClass",X(2,ae,(n==null?null:n.name)===((o=i.selectedVehicle())==null?null:o.name))),a(),_(" ",n.name," ")}}function me(t,e){if(t&1&&(l(0,"div",2)(1,"div",4),V(2,de,2,4,"button",5,se),r()()),t&2){let o=u();a(2),D(o.vehicles())}}function ue(t,e){if(t&1&&(l(0,"div",3),s(1),r()),t&2){let o=u();a(),_(" ",o.errorMessage," ")}}var oe=(()=>{let e=class e{constructor(){this.pageTitle="Vehicles",this.errorMessage="",this.vehicleService=m(I),this.vehicles=C(()=>{try{return this.vehicleService.vehicles()}catch(n){return this.errorMessage=typeof n=="string"?n:"Error",[]}}),this.selectedVehicle=this.vehicleService.selectedVehicle}onSelected(n){this.vehicleService.vehicleSelected(n)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=f({type:e,selectors:[["swv-vehicle-list"]],standalone:!0,features:[g],decls:5,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"alert","alert-danger"],[1,"list-group"],["type","button",1,"list-group-item",3,"ngClass"],["type","button",1,"list-group-item",3,"click","ngClass"]],template:function(i,c){i&1&&(l(0,"div",0)(1,"div",1),s(2),r(),S(3,me,4,0,"div",2)(4,ue,2,1,"div",3),r()),i&2&&(a(2),_(" ",c.pageTitle," "),a(),x(c.vehicles().length?3:-1),a(),x(c.errorMessage?4:-1))},dependencies:[te],encapsulation:2});let t=e;return t})();var pe=(t,e)=>e.title;function ve(t,e){if(t&1&&(l(0,"li",8),s(1),r()),t&2){let o=e.$implicit;a(),v(o.title)}}function he(t,e){if(t&1&&(l(0,"div",3)(1,"div",4),s(2,"Films:"),r(),l(3,"div",5)(4,"ul",7),V(5,ve,2,1,"li",8,pe),r()()()),t&2){let o=u(2);a(5),D(o.vehicleFilms())}}function fe(t,e){if(t&1){let o=k();l(0,"div",0)(1,"div",1),s(2),r(),l(3,"div",2)(4,"div",3)(5,"div",4),s(6,"Name:"),r(),l(7,"div",5),s(8),r(),l(9,"div",4)(10,"button",6),T("click",function(){y(o);let i=u();return w(i.addToCart(i.vehicle()))}),s(11,"Add to Cart "),r()()(),l(12,"div",3)(13,"div",4),s(14,"Classification:"),r(),l(15,"div",5),s(16),r()(),l(17,"div",3)(18,"div",4),s(19,"Price (in credits):"),r(),l(20,"div",5),s(21),Y(22,"number"),r()(),l(23,"div",3)(24,"div",4),s(25,"Crew:"),r(),l(26,"div",5),s(27),r()(),l(28,"div",3)(29,"div",4),s(30,"Passengers:"),r(),l(31,"div",5),s(32),r()(),l(33,"div",3)(34,"div",4),s(35,"Cargo Capacity:"),r(),l(36,"div",5),s(37),r()(),S(38,he,7,0,"div",3),r()()}if(t&2){let o,n,i,c,h,d,p=u();a(2),_(" ",p.pageTitle()," "),a(6),v((o=p.vehicle())==null?null:o.name),a(8),v((n=p.vehicle())==null?null:n.vehicle_class),a(5),v(Z(22,8,(i=p.vehicle())==null?null:i.cost_in_credits,"1.2-2")),a(6),v((c=p.vehicle())==null?null:c.crew),a(5),v((h=p.vehicle())==null?null:h.passengers),a(5),v((d=p.vehicle())==null?null:d.cargo_capacity),a(),x(p.vehicleFilms()?38:-1)}}var le=(()=>{let e=class e{constructor(){this.errorMessage="",this.cartService=m(re),this.vehicleService=m(I),this.vehicle=this.vehicleService.selectedVehicle,this.vehicleFilms=this.vehicleService.vehicleFilms,this.pageTitle=C(()=>this.vehicle()?`Detail for: ${this.vehicle()?.name}`:"")}addToCart(n){n&&this.cartService.addToCart(n)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=f({type:e,selectors:[["swv-vehicle-detail"]],standalone:!0,features:[g],decls:1,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[1,"btn","btn-primary",3,"click"],[1,"list-group"],[1,"list-group-item"]],template:function(i,c){i&1&&S(0,fe,39,11,"div",0),i&2&&x(c.vehicle()?0:-1)},dependencies:[ie],encapsulation:2});let t=e;return t})();var Be=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=f({type:e,selectors:[["swv-vehicle-shell"]],standalone:!0,features:[g],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-4"],[1,"col-md-8"]],template:function(i,c){i&1&&(l(0,"div",0)(1,"div",1),$(2,"swv-vehicle-list"),r(),l(3,"div",2),$(4,"swv-vehicle-detail"),r()())},dependencies:[oe,le],encapsulation:2});let t=e;return t})();export{Be as VehicleShellComponent};
