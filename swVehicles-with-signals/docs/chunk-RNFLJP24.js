import{a as ne}from"./chunk-SOZ232CL.js";import{Aa as g,Ba as T,Da as b,Ea as W,Eb as re,I as J,K as z,Ma as C,N as G,Oa as X,Qa as f,Sa as w,T as u,Ta as E,Ua as o,Va as l,W as S,Wa as j,X as y,Xa as V,Ya as F,Za as p,_ as K,a as R,b as q,bb as c,cb as v,db as _,fb as x,hb as Y,ia as m,ib as Z,j as L,jb as ee,n as P,na as I,q as A,ra as Q,va as s,w as B,x as U,y as H,yb as te,za as h,zb as ie}from"./chunk-XLVWBAB3.js";function M(i,e){!e?.injector&&I(M);let r=e?.injector??m(Q),n=new L(1),t=W(()=>{let a;try{a=i()}catch(d){T(()=>n.error(d));return}T(()=>n.next(a))},{injector:r,manualCleanup:!0});return r.get(b).onDestroy(()=>{t.destroy(),n.complete()}),n.asObservable()}function k(i,e){let r=!e?.manualCleanup;r&&!e?.injector&&I(k);let n=r?e?.injector?.get(b)??m(b):null,t;e?.requireSync?t=g({kind:0}):t=g({kind:1,value:e?.initialValue});let a=i.subscribe({next:d=>t.set({kind:1,value:d}),error:d=>{if(e?.rejectErrors)throw d;t.set({kind:2,error:d})}});return n?.onDestroy(a.unsubscribe.bind(a)),h(()=>{let d=t();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new G(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var D=(()=>{let e=class e{constructor(){this.url="https://swapi.py4e.com/api/vehicles/",this.http=m(ne),this.vehicles$=this.http.get(this.url).pipe(A(n=>n.results.map(t=>q(R({},t),{cost_in_credits:isNaN(Number(t.cost_in_credits))?String(Math.random()*1e5):t.cost_in_credits}))),J(1),H(this.handleError)),this.vehicles=k(this.vehicles$,{initialValue:[]}),this.selectedVehicle=g(void 0),this.vehicleFilms$=M(this.selectedVehicle).pipe(U(Boolean),z(n=>B(n.films.map(t=>this.http.get(t))))),this.vehicleFilms=k(this.vehicleFilms$,{initialValue:[]})}vehicleSelected(n){let t=this.vehicles().find(a=>a.name===n);this.selectedVehicle.set(t)}handleError(n){let t="";return n.error instanceof ErrorEvent?t=`An error occurred: ${n.error.message}`:t=`Server returned code: ${n.status}, error message is: ${n.message}`,console.error(t),P(()=>t)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ce=(i,e)=>e.name,ae=i=>({active:i});function se(i,e){if(i&1){let r=V();o(0,"button",6),F("click",function(){let a=S(r).$implicit,d=p(2);return y(d.onSelected(a.name))}),c(1),l()}if(i&2){let r=e.$implicit,n=p(2),t;X("ngClass",Y(2,ae,(r==null?null:r.name)===((t=n.selectedVehicle())==null?null:t.name))),s(),_(" ",r.name," ")}}function de(i,e){if(i&1&&(o(0,"div",4)(1,"div",5),w(2,se,2,4,"button",7,ce),l()()),i&2){let r=p();s(2),E(r.vehicles())}}function me(i,e){if(i&1&&(o(0,"div",8),c(1),l()),i&2){let r=p();s(),_(" ",r.errorMessage," ")}}var le=(()=>{let e=class e{constructor(){this.pageTitle="Vehicles",this.errorMessage="",this.vehicleService=m(D),this.vehicles=h(()=>{try{return this.vehicleService.vehicles()}catch(n){return this.errorMessage=typeof n=="string"?n:"Error",[]}}),this.selectedVehicle=this.vehicleService.selectedVehicle}onSelected(n){this.vehicleService.vehicleSelected(n)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["swv-vehicle-list"]],standalone:!0,features:[x],decls:5,vars:3,consts:[[1,"card"],[1,"card-header"],["class","card-body"],["class","alert alert-danger"],[1,"card-body"],[1,"list-group"],["type","button",1,"list-group-item",3,"ngClass","click"],["type","button","class","list-group-item",3,"ngClass"],[1,"alert","alert-danger"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1),c(2),l(),C(3,de,4,0,"div",2)(4,me,2,1,"div",3),l()),t&2&&(s(2),_(" ",a.pageTitle," "),s(),f(3,a.vehicles().length?3:-1),s(),f(4,a.errorMessage?4:-1))},dependencies:[te],encapsulation:2});let i=e;return i})();var pe=(i,e)=>e.title;function ve(i,e){if(i&1&&(o(0,"li",10),c(1),l()),i&2){let r=e.$implicit;s(),v(r.title)}}function ue(i,e){if(i&1&&(o(0,"div",4)(1,"div",5),c(2,"Films:"),l(),o(3,"div",6)(4,"ul",9),w(5,ve,2,1,"li",11,pe),l()()()),i&2){let r=p(2);s(5),E(r.vehicleFilms())}}function he(i,e){if(i&1){let r=V();o(0,"div",1)(1,"div",2),c(2),l(),o(3,"div",3)(4,"div",4)(5,"div",5),c(6,"Name:"),l(),o(7,"div",6),c(8),l(),o(9,"div",5)(10,"button",7),F("click",function(){S(r);let t=p();return y(t.addToCart(t.vehicle()))}),c(11,"Add to Cart "),l()()(),o(12,"div",4)(13,"div",5),c(14,"Classification:"),l(),o(15,"div",6),c(16),l()(),o(17,"div",4)(18,"div",5),c(19,"Price (in credits):"),l(),o(20,"div",6),c(21),Z(22,"number"),l()(),o(23,"div",4)(24,"div",5),c(25,"Crew:"),l(),o(26,"div",6),c(27),l()(),o(28,"div",4)(29,"div",5),c(30,"Passengers:"),l(),o(31,"div",6),c(32),l()(),o(33,"div",4)(34,"div",5),c(35,"Cargo Capacity:"),l(),o(36,"div",6),c(37),l()(),C(38,ue,7,0,"div",8),l()()}if(i&2){let r=p(),n,t,a,d,N,O;s(2),_(" ",r.pageTitle()," "),s(6),v((n=r.vehicle())==null?null:n.name),s(8),v((t=r.vehicle())==null?null:t.vehicle_class),s(5),v(ee(22,8,(a=r.vehicle())==null?null:a.cost_in_credits,"1.2-2")),s(6),v((d=r.vehicle())==null?null:d.crew),s(5),v((N=r.vehicle())==null?null:N.passengers),s(5),v((O=r.vehicle())==null?null:O.cargo_capacity),s(),f(38,r.vehicleFilms()?38:-1)}}var oe=(()=>{let e=class e{constructor(){this.errorMessage="",this.cartService=m(re),this.vehicleService=m(D),this.vehicle=this.vehicleService.selectedVehicle,this.vehicleFilms=this.vehicleService.vehicleFilms,this.pageTitle=h(()=>this.vehicle()?`Detail for: ${this.vehicle()?.name}`:"")}addToCart(n){n&&this.cartService.addToCart(n)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["swv-vehicle-detail"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["class","card"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[1,"btn","btn-primary",3,"click"],["class","row"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item"]],template:function(t,a){t&1&&C(0,he,39,11,"div",0),t&2&&f(0,a.vehicle()?0:-1)},dependencies:[ie],encapsulation:2});let i=e;return i})();var Ae=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["swv-vehicle-shell"]],standalone:!0,features:[x],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-4"],[1,"col-md-8"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1),j(2,"swv-vehicle-list"),l(),o(3,"div",2),j(4,"swv-vehicle-detail"),l()())},dependencies:[le,oe],encapsulation:2});let i=e;return i})();export{Ae as VehicleShellComponent};
